# eviction-addresses

This repo contains a data-entry dashboard, as well as an API to facilitate the collection and validation of eviction addresses from OSCN.

## Scheduled Runs

We have created scheduled triggers to call the /refresh and /hydrate endpoints on the API periodically. The /refresh endpoint searches for new eviction cases and their associated documents in the database. It also gathers minutes from previosuly collected cases, since documents are uploaded to OSCN as a case progresses. These records are entered into the case and document tables in the eviction_addresses schema. Next, the queue table is cleansed of jobs that have already been completed. New cases with at least one document are then added to the queue.

This is a long process, so care must be taken to ensure timeouts do not occur. A timeout of at least 20 minutes is recommended. The timeout is defined in seconds within the build yaml generated by the build R files in the root of this repo.

## Address Validation, Verification, and Geocoding

We use Postgrid as our address verification service. We are billed per address, so only use the live Postgrid API key when you need to, not for testing.

## Deploy

Deployment occurs to either the testing or production environments when you push code to the dev or main branch on Github, respectively.

This is made possible by Google Cloud Build Triggers. Currently the trigger is enabled manually, then created in the build and build_test files using {googleCloudRunner}.
